#!/usr/bin/env perl

BEGIN { use lib 't'; require 'testlib.pl'; }

use Modern::Perl;

# shr - error no arguments
spew("$test.in", "shr");
capture_nok("bfpp $test.in", <<END);
$test.in:1:4: error: expected '(' after macro name 'shr'
END

# shr - error empty arguments
spew("$test.in", "shr()");
capture_nok("bfpp $test.in", <<END);
$test.in:1:6: error: macro 'shr' expects 2 arguments
END

# shr - error too many arguments
spew("$test.in", "shr(A,B,C)");
capture_nok("bfpp $test.in", <<END);
$test.in:1:8: error: expected ')' at end of macro call, found ','
END

# shr(a,b)
spew("$test.in", <<END);
alloc_cell(A)
alloc_cell(B)
shr(A,B)
END
capture_ok("bfpp $test.in", <<END);
[
  -
]
>
[
  -
]
>
[
  -
]
>
[
  -
]
>
[
  -
]
+>
[
  -
]
++>
[
  -
]
>
[
  -
]
<
[
  -
]
<<<<<
[
  ->>>>>+>+<<<<<<
]
>>>>>>
[
  -<<<<<<+>>>>>>
]
[
  -
]
<
[
  >
  [
    -
  ]
  <<<<
  [
    -
  ]
  <<<
  [
    ->>>+>>>>+<<<<<<<
  ]
  >>>>>>>
  [
    -<<<<<<<+>>>>>>>
  ]
  [
    -
  ]
  [
    -
  ]
  >
  [
    -
  ]
  >
  [
    -
  ]
  >
  [
    -
  ]
  >
  [
    -
  ]
  <<<<
  [
    -
  ]
  <<<<
  [
    ->>>>+>>>>+<<<<<<<<
  ]
  >>>>>>>>
  [
    -<<<<<<<<+>>>>>>>>
  ]
  [
    -
  ]
  [
    -
  ]
  <<<
  [
    -
  ]
  <<<
  [
    ->>>+>>>+<<<<<<
  ]
  >>>>>>
  [
    -<<<<<<+>>>>>>
  ]
  [
    -
  ]
  [
    -
  ]
  <<
  [
    -
  ]
  <<
  [
    ->>+>>+<<<<
  ]
  >>>>
  [
    -<<<<+>>>>
  ]
  [
    -
  ]
  [
    -
  ]
  >
  [
    -
  ]
  >
  [
    -
  ]
  <<
  [
    -
  ]
  <<
  [
    ->>+<<
  ]
  >>>>>
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<<
  [
    ->>>+<<<
  ]
  +>>>>+<
  [
    ->
    [
      -<<<<->>>>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<<
  [
    ->>>+<<<
  ]
  +>>>>+<
  [
    ->
    [
      -<<<<->>>>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<
  [
    -
  ]
  <<<<
  [
    ->>>>+>>+<<<<<<
  ]
  >>>>>>
  [
    -<<<<<<+>>>>>>
  ]
  [
    -
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<
  [
    ->>+<<
  ]
  +>>>+<
  [
    ->
    [
      -<<<->>>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<
  [
    ->>+<<
  ]
  +>>>+<
  [
    ->
    [
      -<<<->>>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <<<<
  [
    ->>
    [
      -
    ]
    <
    [
      ->+<
    ]
    <
  ]
  <<
  [
    -
  ]
  >>>>
  [
    -<<<<+>>>>
  ]
  <<
  [
    -
  ]
  >
  [
    -
  ]
  >
  [
    -
  ]
  <<
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<
  [
    ->>+>+<<<
  ]
  >>>
  [
    -<<<+>>>
  ]
  [
    -
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <
  [
    ->+<
  ]
  +>>+<
  [
    ->
    [
      -<<->>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <
  [
    ->+<
  ]
  +>>+<
  [
    ->
    [
      -<<->>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <<
  [
    <<<<->->>>>
    [
      -
    ]
    <<<
    [
      -
    ]
    <<
    [
      ->>+>>>+<<<<<
    ]
    >>>>>
    [
      -<<<<<+>>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    <<
    [
      -
    ]
    <<<
    [
      ->>>+<<<
    ]
    >>>>>>
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<<
    [
      ->>>+<<<
    ]
    +>>>>+<
    [
      ->
      [
        -<<<<->>>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<<
    [
      ->>>+<<<
    ]
    +>>>>+<
    [
      ->
      [
        -<<<<->>>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      -
    ]
    <<<<<
    [
      ->>>>>+>>+<<<<<<<
    ]
    >>>>>>>
    [
      -<<<<<<<+>>>>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      ->>+<<
    ]
    +>>>+<
    [
      ->
      [
        -<<<->>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      ->>+<<
    ]
    +>>>+<
    [
      ->
      [
        -<<<->>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <<<<
    [
      ->>
      [
        -
      ]
      <
      [
        ->+<
      ]
      <
    ]
    <<<
    [
      -
    ]
    >>>>>
    [
      -<<<<<+>>>>>
    ]
    <<
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    <<
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      ->>+>+<<<
    ]
    >>>
    [
      -<<<+>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <
    [
      ->+<
    ]
    +>>+<
    [
      ->
      [
        -<<->>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <
    [
      ->+<
    ]
    +>>+<
    [
      ->
      [
        -<<->>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <<
  ]
  [
    -
  ]
  <<<<<<<<
  [
    -
  ]
  >>>>>>>>
  [
    -
  ]
  <
  [
    -
  ]
  <<<
  [
    ->>>+>+<<<<
  ]
  >>>>
  [
    -<<<<+>>>>
  ]
  [
    -
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <
  [
    ->+<
  ]
  +>>+<
  [
    ->
    [
      -<<->>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  >
  [
    -
  ]
  >
  [
    -
  ]
  <<
  [
    -
  ]
  <
  [
    ->+<
  ]
  >>>>
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<<
  [
    ->>>+<<<
  ]
  +>>>>+<
  [
    ->
    [
      -<<<<->>>>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<<
  [
    ->>>+<<<
  ]
  +>>>>+<
  [
    ->
    [
      -<<<<->>>>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<
  [
    -
  ]
  <<<<
  [
    ->>>>+>>+<<<<<<
  ]
  >>>>>>
  [
    -<<<<<<+>>>>>>
  ]
  [
    -
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<
  [
    ->>+<<
  ]
  +>>>+<
  [
    ->
    [
      -<<<->>>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<
  [
    ->>+<<
  ]
  +>>>+<
  [
    ->
    [
      -<<<->>>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <<<<
  [
    ->>
    [
      -
    ]
    <
    [
      ->+<
    ]
    <
  ]
  <
  [
    -
  ]
  >>>
  [
    -<<<+>>>
  ]
  <<
  [
    -
  ]
  >
  [
    -
  ]
  >
  [
    -
  ]
  <<
  [
    -
  ]
  >
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<
  [
    ->>+>+<<<
  ]
  >>>
  [
    -<<<+>>>
  ]
  [
    -
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <
  [
    ->+<
  ]
  +>>+<
  [
    ->
    [
      -<<->>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<
  [
    -
  ]
  >
  [
    -<+>>+<
  ]
  >
  [
    -<+>
  ]
  [
    -
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<
  [
    ->>+<<
  ]
  +>>>+<
  [
    ->
    [
      -<<<->>>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <<<
  [
    <<<<<<<<+>>>>>>>>-
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <<<<<
  [
    -
  ]
  >
  [
    -
  ]
  >
  [
    -
  ]
  >
  [
    -
  ]
  <<<
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<<<
  [
    ->>>>+<<<<
  ]
  +>>>>>+<
  [
    ->
    [
      -<<<<<->>>>>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <<<<
  [
    ->>>>+>+<<<<<
  ]
  >>>>>
  [
    -<<<<<+>>>>>
  ]
  [
    -
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <
  [
    ->+<
  ]
  +>>+<
  [
    ->
    [
      -<<->>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  >
  [
    -
  ]
  <
  [
    -
  ]
  <
  [
    ->+<
  ]
  +>>+<
  [
    ->
    [
      -<<->>
    ]
    <
  ]
  [
    -
  ]
  >
  [
    -
  ]
  <<
  [
    >
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<<
    [
      ->>>+>+<<<<
    ]
    >>>>
    [
      -<<<<+>>>>
    ]
    [
      -
    ]
    <
    [
      -<<<<<<<<->>>>>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<<<
    [
      ->>>>+>+<<<<<
    ]
    >>>>>
    [
      -<<<<<+>>>>>
    ]
    [
      -
    ]
    <
    [
      -<<<<<<+>>>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    <<<<<
    [
      -
    ]
    <<<
    [
      ->>>+>>>>>+<<<<<<<<
    ]
    >>>>>>>>
    [
      -<<<<<<<<+>>>>>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    <<<<
    [
      -
    ]
    <<<<<
    [
      ->>>>>+>>>>+<<<<<<<<<
    ]
    >>>>>>>>>
    [
      -<<<<<<<<<+>>>>>>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    <<<
    [
      -
    ]
    <<<<
    [
      ->>>>+>>>+<<<<<<<
    ]
    >>>>>>>
    [
      -<<<<<<<+>>>>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    <<
    [
      -
    ]
    <<
    [
      ->>+>>+<<<<
    ]
    >>>>
    [
      -<<<<+>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    <<
    [
      -
    ]
    <<
    [
      ->>+<<
    ]
    >>>>>
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<<
    [
      ->>>+<<<
    ]
    +>>>>+<
    [
      ->
      [
        -<<<<->>>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<<
    [
      ->>>+<<<
    ]
    +>>>>+<
    [
      ->
      [
        -<<<<->>>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      -
    ]
    <<<<
    [
      ->>>>+>>+<<<<<<
    ]
    >>>>>>
    [
      -<<<<<<+>>>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      ->>+<<
    ]
    +>>>+<
    [
      ->
      [
        -<<<->>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      ->>+<<
    ]
    +>>>+<
    [
      ->
      [
        -<<<->>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <<<<
    [
      ->>
      [
        -
      ]
      <
      [
        ->+<
      ]
      <
    ]
    <<
    [
      -
    ]
    >>>>
    [
      -<<<<+>>>>
    ]
    <<
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    <<
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      ->>+>+<<<
    ]
    >>>
    [
      -<<<+>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <
    [
      ->+<
    ]
    +>>+<
    [
      ->
      [
        -<<->>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <
    [
      ->+<
    ]
    +>>+<
    [
      ->
      [
        -<<->>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <<
    [
      <<<<->->>>>
      [
        -
      ]
      <<<
      [
        -
      ]
      <<
      [
        ->>+>>>+<<<<<
      ]
      >>>>>
      [
        -<<<<<+>>>>>
      ]
      [
        -
      ]
      [
        -
      ]
      >
      [
        -
      ]
      >
      [
        -
      ]
      <<
      [
        -
      ]
      <<<
      [
        ->>>+<<<
      ]
      >>>>>>
      [
        -
      ]
      >
      [
        -
      ]
      <
      [
        -
      ]
      <<<
      [
        ->>>+<<<
      ]
      +>>>>+<
      [
        ->
        [
          -<<<<->>>>
        ]
        <
      ]
      [
        -
      ]
      >
      [
        -
      ]
      <
      [
        -
      ]
      >
      [
        -
      ]
      <
      [
        -
      ]
      <<<
      [
        ->>>+<<<
      ]
      +>>>>+<
      [
        ->
        [
          -<<<<->>>>
        ]
        <
      ]
      [
        -
      ]
      >
      [
        -
      ]
      <
      [
        -
      ]
      <<
      [
        -
      ]
      <<<<<
      [
        ->>>>>+>>+<<<<<<<
      ]
      >>>>>>>
      [
        -<<<<<<<+>>>>>>>
      ]
      [
        -
      ]
      [
        -
      ]
      >
      [
        -
      ]
      <
      [
        -
      ]
      <<
      [
        ->>+<<
      ]
      +>>>+<
      [
        ->
        [
          -<<<->>>
        ]
        <
      ]
      [
        -
      ]
      >
      [
        -
      ]
      <
      [
        -
      ]
      >
      [
        -
      ]
      <
      [
        -
      ]
      <<
      [
        ->>+<<
      ]
      +>>>+<
      [
        ->
        [
          -<<<->>>
        ]
        <
      ]
      [
        -
      ]
      >
      [
        -
      ]
      <<<<
      [
        ->>
        [
          -
        ]
        <
        [
          ->+<
        ]
        <
      ]
      <<<
      [
        -
      ]
      >>>>>
      [
        -<<<<<+>>>>>
      ]
      <<
      [
        -
      ]
      >
      [
        -
      ]
      >
      [
        -
      ]
      <<
      [
        -
      ]
      <
      [
        -
      ]
      <<
      [
        ->>+>+<<<
      ]
      >>>
      [
        -<<<+>>>
      ]
      [
        -
      ]
      [
        -
      ]
      >
      [
        -
      ]
      <
      [
        -
      ]
      <
      [
        ->+<
      ]
      +>>+<
      [
        ->
        [
          -<<->>
        ]
        <
      ]
      [
        -
      ]
      >
      [
        -
      ]
      <
      [
        -
      ]
      >
      [
        -
      ]
      <
      [
        -
      ]
      <
      [
        ->+<
      ]
      +>>+<
      [
        ->
        [
          -<<->>
        ]
        <
      ]
      [
        -
      ]
      >
      [
        -
      ]
      <<
    ]
    [
      -
    ]
    <<<<<<<<<
    [
      -
    ]
    >>>>>>>>>
    [
      -
    ]
    <
    [
      -
    ]
    <<<
    [
      ->>>+>+<<<<
    ]
    >>>>
    [
      -<<<<+>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <
    [
      ->+<
    ]
    +>>+<
    [
      ->
      [
        -<<->>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    <<
    [
      -
    ]
    <
    [
      ->+<
    ]
    >>>>
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<<
    [
      ->>>+<<<
    ]
    +>>>>+<
    [
      ->
      [
        -<<<<->>>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<<
    [
      ->>>+<<<
    ]
    +>>>>+<
    [
      ->
      [
        -<<<<->>>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      -
    ]
    <<<<
    [
      ->>>>+>>+<<<<<<
    ]
    >>>>>>
    [
      -<<<<<<+>>>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      ->>+<<
    ]
    +>>>+<
    [
      ->
      [
        -<<<->>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      ->>+<<
    ]
    +>>>+<
    [
      ->
      [
        -<<<->>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <<<<
    [
      ->>
      [
        -
      ]
      <
      [
        ->+<
      ]
      <
    ]
    <
    [
      -
    ]
    >>>
    [
      -<<<+>>>
    ]
    <<
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    <<
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      ->>+>+<<<
    ]
    >>>
    [
      -<<<+>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <
    [
      ->+<
    ]
    +>>+<
    [
      ->
      [
        -<<->>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      -
    ]
    >
    [
      -<+>>+<
    ]
    >
    [
      -<+>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<
    [
      ->>+<<
    ]
    +>>>+<
    [
      ->
      [
        -<<<->>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <<<
    [
      <<<<<<<<<+>>>>>>>>>-
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <<<<<
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    >
    [
      -
    ]
    <<<
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <<<<<
    [
      ->>>>>+<<<<<
    ]
    +>>>>>>+<
    [
      ->
      [
        -<<<<<<->>>>>>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <
    [
      -
    ]
    <<<<
    [
      ->>>>+>+<<<<<
    ]
    >>>>>
    [
      -<<<<<+>>>>>
    ]
    [
      -
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <
    [
      ->+<
    ]
    +>>+<
    [
      ->
      [
        -<<->>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    >
    [
      -
    ]
    <
    [
      -
    ]
    <
    [
      ->+<
    ]
    +>>+<
    [
      ->
      [
        -<<->>
      ]
      <
    ]
    [
      -
    ]
    >
    [
      -
    ]
    <<
  ]
  [
    -
  ]
  <<<<<<<
  [
    -
  ]
  >>
  [
    -<<+>>
  ]
  >>>>-
]
<<<<
[
  -
]
>
[
  -
]
>
[
  -
]
>
[
  -
]
>
[
  -
]
<<<<<<
END

# run shr(a,b)
for my $A (0, 1, 2, 4, 8, 16, 32, 64, 128, 255) {
	for my $B (1, 2, 4) {
		spew("$test.in", <<END);
		alloc_cell(A)
		alloc_cell(B)
		set(A, $A)
		set(B, $B)
		shr(A, B)
		>B
END
		my $R = sprintf("%3d", $A >> $B);
		capture_ok("bfpp $test.in | bf -D", <<END);
Tape:$R   $B 
         ^^^ (ptr=1)

END
	}
}

unlink_testfiles;
done_testing;
